<!DOCTYPE html>
<html lang="en">
  
  <!-- Page title set in pageTitle directive -->
  <title page-title>Turbonomic Actions</title>
  
  
  <link href="http://localhost:4000/css/FourD_CSS/vmtHelp.css" rel="stylesheet" type="text/css"/>
  
  
  <body>
    
    <div id="angularThing" ng-controller="TopicCtrl as mainCtrl">
      <nav class='banner'>
        <div class="bannerbar" >
          
          
          <img src="/assets/logos/logoInv.png" id="logo_image" style="width: 80%; max-width: 100px;"/>
          
          <div class="titleHead">
            <h4 class="revision"><font color="white">Turbonomic Actions</span></font></h4>
          </div>
        </div>
      </nav>
      
      
      <div id="topicDiv">
        <article id ='topicArt' class="topic">
          <h1>Custom Business Rules</h1>
          <!--
          <div style="font-size: 10px;">
            <p>site.github.baseurl is: /pages/turbonomic/snow-doc</p>
            
            
            
            <p>CSS LINK IS: http://localhost:4000/css/FourD_CSS/vmtHelp.css</p>
            
            
            
            <p>LOGO LINK IS: /assets/logos/logoInv.png</p>
            
            
            
            
            <p>DOC HOME LINK: http://localhost:4000/index.html</p>
            
            
            <p>REPOS URL IS: https://github.com/turbonomic/snow-doc</p>
          </div>
          -->
          <p>By default, the Turbonomic Actions app creates corresponding 
change requests in ServiceNow for each action approval. When the change requests states 
do not match those the application expects or when you have complex workflows for 
creating and managing your CRs, you must implement custom custom business rules.</p>

<p>The default change request states used by the Turbonomic 
Actions application are:</p>

<table>
  <thead>
    <tr>
      <th>Change Request State</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>NEW</td>
      <td>-5</td>
    </tr>
    <tr>
      <td>ASSESS</td>
      <td>-4</td>
    </tr>
    <tr>
      <td>AUTHORIZE</td>
      <td>-3</td>
    </tr>
    <tr>
      <td>SCHEDULED</td>
      <td>-2</td>
    </tr>
    <tr>
      <td>IMPLEMENT</td>
      <td>-1</td>
    </tr>
    <tr>
      <td>REVIEW</td>
      <td>0</td>
    </tr>
    <tr>
      <td>CLOSE</td>
      <td>3</td>
    </tr>
    <tr>
      <td>CANCELLED</td>
      <td>4</td>
    </tr>
  </tbody>
</table>

<p>To enable your custom business rules, you must check the 
<strong>Use Custom Business Rule for CR Creation</strong> application setting:</p>

<p><img src="/assets/SNOW_Cust_BR_Enable.png" alt="Enabling Custom Business Rules" width="950" /></p>

<p>Note that your custom business rules must:</p>

<ul>
  <li>
    <p>Create a new CR for every newly added action approval record in 
the <code class="language-plaintext highlighter-rouge">PENDING_APPROVAL</code> state. It must also link the CR to the action approval.</p>
  </li>
  <li>
    <p>For every change request, update the state of its corresponding action approval 
based on the approval/rejection of the request. When the CR is canceled, the action 
approval state must be set to <code class="language-plaintext highlighter-rouge">REJECTED</code>. When the CR is approved, the action approval 
state must be set to <code class="language-plaintext highlighter-rouge">APPROVED</code>.</p>
  </li>
  <li>
    <p>If a CR is approved but has a future schedule attached to it (Planned Start Date is 
in the future), the state of its corresponding action approval must be set to 
<code class="language-plaintext highlighter-rouge">WAITING_FOR_CR_SCHEDULE</code>. Later on, when the CR schedule is on, the rule must change 
the approval state to <code class="language-plaintext highlighter-rouge">APPROVED</code>.</p>
  </li>
  <li>
    <p>After the Turbonomic action completes its execution and the 
approval state is set to <code class="language-plaintext highlighter-rouge">SUCCEEDED</code> or <code class="language-plaintext highlighter-rouge">FAILED</code>, the rule must close the corresponding 
CR as successful or unsuccessful, respectively. Similarly, the rule must close the CR as 
unsuccessful when the action approval transitions to the <code class="language-plaintext highlighter-rouge">MISSED</code> state.</p>
  </li>
</ul>

<hr />
<p><strong>Note:</strong> If your business rules do not implement these logic steps, we cannot guarantee that 
  Turbonomic will execute the given actions.</p>

<hr />


          
        </article>
      </div>
      </section>
      
      <div id="navList">
        
        <span>
          <div id="toc">
            
            <article class="navList" style="top:10px;">
              <div id="tocresult" tabIdex="-1" >
                <ul>
                  
                  
                  <h5><a href="http://localhost:4000/index.html">DOCUMENTATION HOME</a></h5>
                  
                  
                  <h5 style="margin-bottom:1px;">Turbonomic Actions Technical Details</h5>
                    <ul>
                    
                        
                        <li><a href="http://localhost:4000/page/TechDetails/overview.html">Overview</a></li>
                        
                        <ul>
                          
                          
                          
                        </ul>
                    
                        
                        <li><a href="http://localhost:4000/page/TechDetails/collaboration_diagram.html">Collaboration Diagram</a></li>
                        
                        <ul>
                          
                          
                          
                        </ul>
                    
                        
                        <li><a href="http://localhost:4000/page/TechDetails/REST_API.html">REST API</a></li>
                        
                        <ul>
                          
                          
                          
                        </ul>
                    
                        
                        <li><a href="http://localhost:4000/page/TechDetails/States_and_Transitions.html">Action Approval States and Transitions</a></li>
                        
                        <ul>
                          
                          
                          
                        </ul>
                    
                        
                        <li><a href="http://localhost:4000/page/TechDetails/Scripts_and_Model.html">Server Scripts and Data Model</a></li>
                        
                        <ul>
                          
                          
                          
                        </ul>
                    
                        
                        <li><a href="http://localhost:4000/page/TechDetails/Transform_Maps.html">Transform Maps</a></li>
                        
                        <ul>
                          
                          
                          
                        </ul>
                    
                        
                        <li><a href="http://localhost:4000/page/TechDetails/Custom_Business_Rules.html">Custom Business Rules</a></li>
                        
                        <ul>
                          
                          
                            
                          <li><a href="http://localhost:4000/page/TechDetails/Custom_Rule_CreateCR.html">EXAMPLE Create CR</a></li>
                            
                          
                            
                          <li><a href="http://localhost:4000/page/TechDetails/Custom_Rule_UpdateState.html">EXAMPLE Update Action Approval State</a></li>
                            
                          
                            
                          <li><a href="http://localhost:4000/page/TechDetails/Custom_Rule_CloseCR.html">EXAMPLE Close CR</a></li>
                            
                          
                          
                        </ul>
                    
                        
                        <li><a href="http://localhost:4000/page/TechDetails/Custom_CI_Matching.html">APPENDIX Implementing Custom CI Matching</a></li>
                        
                        <ul>
                          
                          
                          
                        </ul>
                    
                    </ul>
                  
                </ul>
              </div>
            </article>
          </div>
        </span>
      </div>
    </div>
    
  </body>
  
</html>
